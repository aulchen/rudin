\documentclass{amsart}
\usepackage{mathtools}

\newcommand{\RiemannIntable}{
  \mathfrak{R}
}

\newtheorem{theorem}{Theorem}[subsection]
\newtheorem{lemma}{Lemma}[subsubsection]

\author{Arthur Chen}
\title{Rudin Chapter 6}
\date{\today}

\begin{document}

\section*{6.6 Integration and Differentiation}

\subsection*{Problem 6.6:1}

On $[a, b]$, let $\alpha$ be a strictly increasing function and $f$ a continuous function, and for $x \in [a, b]$ define $F(x) = \int_a^x f(t) d\alpha(t)$. Show that for all $x \in [a, b]$, $\frac{dF(x)}{d \alpha(x)} = f(x)$, where the left-hand side is defined as $\lim_{t \to x} \frac{F(x) - F(t)}{\alpha(x) - \alpha(t)}$, and the equality includes the assertion that the limit exists.

\begin{proof}

First, we note that because $f \in \RiemannIntable(\alpha)$ on $[a, b]$

\[F(x) - F(t) = \int_a^x f(s)d\alpha(s) - \int_a^t f(s) d\alpha(s) = \int_t^x f(x) d\alpha(s)
\]

For all partitions $P$,

\[
\int_t^x f(s) d\alpha(s)
\leq \sum_{x_i \in P} M_i \Delta \alpha_i
\leq \left(\sup_{s \in [x, t]} f(s) \right) \sum_{x_i \in P} \Delta \alpha_i
= \left(\sup_{s \in [x, t]} f(s) \right) (\alpha(x) - \alpha(t))
\]

Since $\alpha(x)$ is strictly increasing, $\alpha(x) - \alpha(t) > 0$ when $x \neq t$, so

\[
\frac{F(x) - F(t)}{\alpha(x) - \alpha(t)} \leq \sup_{s \in [x, t]} f(s)
\]

Taking the limit as $t$ approaches $x$ on both sides gives

\[
\lim_{t \to x} \frac{F(x) - F(t)}{\alpha(x) - \alpha(t)} \leq \lim_{t \to x} \sup_{s \in [x, t]} f(s)
\]

\begin{lemma}

\[
\lim_{t \to x} \sup_{s \in [x, t]} f(s) = f(x)
\]

\begin{proof}

Let $x_n$ be an arbitrary sequence such that $\forall n \in \mathbb{N}, x_n > x$ and $\lim_{n \to \infty} x_n = x$. Since $[x, x_n]$ is a closed, bounded interval on $\mathbb{R}$ and $f$ is continuous, there exists a sequence of points $p_n \in [x, x_n]$ such that $f(p_n) =  \sup_{s \in [x, x_n]} f(s)$. $x_n \rightarrow x$ implies $p_n \rightarrow x$ by the Squeeze Theorem, and the continuity of $f$ implies that $f(p_n) \rightarrow f(x)$.

\end{proof}
\end{lemma}

Thus

\[
\lim_{t \to x} \frac{F(x) - F(t)}{\alpha(x) - \alpha(t)} \leq f(x)
\]

The analogous result for the lower integral and the Squeeze Theorem complete the proof.

\end{proof}

\subsection*{Problem 6.6:2}

\subsubsection*{(a)}

Show that if $f$ is continuous, then

\[
\int_{t=a}^b \left(\int_{s=a}^t f(s) ds \right) dt
= \int_{t=a}^b (b-t) f(t) dt
\]

\begin{proof}

Let $x \in [a, b]$. Define $P(x) = \int_{t=a}^x \left(\int_{s=a}^t f(s) ds \right) dt$ and $Q(x) = \int_{t=a}^x (x-t) f(t) dt$.

$f(t)$ being continuous on $[a, b]$ implies that it is Riemann-integrable. This implies that $f^*(t) = \int_{s=a}^t f(s) ds$ is continuous, and that $P(x) = \int_a^x f^*(t)dt$ is continuous and differentiable. Similarly, $(b-t)f(t)$ is continuous on $[a, b]$, so $Q(x)$ is continuous and differentiable.

By the Fundamental Theorem of Calculus,

\[
P'(x) = \int_{s=a}^x f(s) ds
\]

For $Q(x)$, since $t$ and $tf(t)$ are Riemann-integrable,

\[
Q(x) = x \int_{t=a}^x f(t) dt - \int_{t=a}^x t f(t) dt
\]

$x$ is trivially differentiable. Since $t$ and $tf(t)$ are continuous,

\[
Q'(x) = \int_{t=a}^x f(t) dt + x f(x) - x f(x) = \int_{t=a}^x f(t) dt
\]

Thus, $P'(x) = Q'(x)$. Integrating both sides from $a$ to $c$, then setting $c = b$, produces the desired result.

\end{proof}

\subsubsection*{(c)}

Show that the result of Part (a) continues to hold if $f$ is merely assumed Riemann-integrable, but not necessarily continuous.

\begin{proof}

$P(x)$ has the same derivative as in Part (a), as the derivation only assumed that $P(x)$ is Riemann-integrable. Similarly, for $x_0 \in [a, b]$ where $f(x_0)$ is continuous, the above derivations hold for $Q(x)$.

Let $x_0$ be a point where $f(x_0)$ is discontinuous. First, we will prove two lemmas.

\begin{lemma}
\label{boundedIsCont}

If $f(x)$ is bounded, then $(x - x_0) f(x)$ is continuous at $x_0$.

\begin{proof}

Let $M = \sup |f(x)|$. Then $(x - x_0) f(x) \leq |(x - x_0) f(x)| \leq |(x - x_0)| M$, which can be made arbitrarily small.

\end{proof}
\end{lemma}

\begin{lemma}
\label{contIsDiff}

If $f(x)$ is continuous, then $(x - x_0) f(x)$ is differentiable at $x_0$ with derivative $f(x_0)$.

\begin{proof}

By the definition of differentiability,

\[
\lim_{x \to x_0} \frac{(x - x_0) f(x) - (x_0 - x_0) f(x_0)}{x - x_0}
= \lim_{x \to x_0} f(x) = f(x_0)
\]

by continuity.

\end{proof}
\end{lemma}

We can rewrite $Q(x)$ as

\[
Q(x) = \int_{t=a}^x ((x-x_0) + (x_0-t)) f(t) dt
= (x-x_0) \int_{t=a}^x f(t) dt + \int_{t=a}^x (x_0-t)f(t) dt
\]

because the sub-functions are trivially Riemann-integrable. $\int_{t=a}^x f(t)$ is a continuous function, so by Lemma \ref{contIsDiff} $(x-x_0) \int_{t=a}^x f(t) dt$ is differentiable at $x = x_0$ with derivative $\int_{t=a}^{x_0} f(t) dt$. Similarly, $f(t)$ is bounded because it is Riemann-integrable, so by Lemma \ref{boundedIsCont} $(x_0-t)f(t)$ is continuous at $t = x_0$. Therefore $\int_{t=a}^x (x_0-t)f(t) dt$ is differentiable at $x = x_0$, with derivative $0$.

Therefore, $Q(x)$ is differentiable at $x = x_0$, and $Q'(x_0) = \int_{t=a}^x f(t) dt$. The proof then follows using the same logic as in Part (a).

\end{proof}

To build intuition for Problem 6.6:4, we first solve a special case.

\subsection*{Problem 6.6:4 Special Case}

Let $\alpha$, $\beta$ be monotonically increasing nonnegative functions on $[a, b]$ such that $\alpha \in \RiemannIntable(\beta)$, and $\beta \in \RiemannIntable(\alpha)$. Prove that

\[
\int d(\alpha \beta) = \int \alpha d(\beta) + \int \beta d(\alpha)
\]

\begin{proof}

Note that the function $1$ is trivially Riemann-Stieltjes integrable with respect to $\alpha \beta$.

Due to Riemann-integrability, there are partitions $P$, $P_1$, and $P_2$ such that

\begin{align*}
& 0 \leq |\int d(\alpha\beta) - \sum_{i \in P} \Delta(\alpha\beta)_i | \leq \frac{\epsilon}{3} \\
& 0 \leq |\int \alpha d(\beta) - \sum_{i \in P_1} \alpha_i \Delta\beta | \leq \frac{\epsilon}{3} \\
& 0 \leq |\int \beta d(\alpha) - \sum_{i \in P_2} \beta_{i-1} \Delta\alpha | \leq \frac{\epsilon}{3} \\
\end{align*}

Taking the common partition $P^* = P \cup P_1 \cup P_2$ and using the Triangle Inequality,

\[
0 \leq |
\int \alpha d(\beta) + \int \beta d(\alpha) - \int d(\alpha\beta)
+ \sum_{i \in P^*} (- \Delta(\alpha\beta)_i + \alpha_i \Delta\beta + \beta_{i-1} \Delta\alpha)
| \leq \epsilon
\]

For any partition $P$,

\begin{align*}
&\alpha_i \Delta\beta_i + \beta_{i-1} \Delta\alpha_i \\
= &\alpha_i \beta_i - \alpha_i \beta_{i-1} + \alpha_i \beta_{i-1} - \alpha_{i-1} \beta_{i-1} \\
= & \alpha_i\beta_i - \alpha_{i-1} \beta_{i-1} \\
= & \Delta(\alpha\beta)_i
\end{align*}

Substituting,

\[
0 \leq |
\int \alpha d(\beta) + \int \beta d(\alpha) - \int d(\alpha\beta)| \leq \epsilon
\]

Since $\epsilon$ can be made arbitrarily small, the proof is complete.

\end{proof}

\subsection*{Problem 6.6:4}

Let $f$ be a function on $[a, b]$, and $\alpha$, $\beta$ monotonically increasing nonnegative functions on $[a, b]$ such that $f \in \RiemannIntable(\alpha) \cap \RiemannIntable(\beta)$, $\alpha \in \RiemannIntable(\beta)$, and $\beta \in \RiemannIntable(\alpha)$. Prove that

\[
\int f d(\alpha \beta) = \int f \alpha d(\beta) + \int f \beta d(\alpha)
\]

\begin{proof}

\end{proof}
TODO
\end{document}